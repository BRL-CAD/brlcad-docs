'\" t
.\"     Title: draft!!! nirt output formatting specifications
.\"    Author: BRL-CAD Team
.\" Generator: Asciidoctor 2.0.10
.\"      Date: 2021-07-14
.\"    Manual: BRL-CAD
.\"    Source: BRL-CAD
.\"  Language: English
.\"
.TH "NIRT_FORMATTING" "5" "2021-07-14" "BRL\-CAD" "BRL\-CAD"
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.ss \n[.ss] 0
.nh
.ad l
.de URL
\fI\\$2\fP <\\$1>\\$3
..
.als MTO URL
.if \n[.g] \{\
.  mso www.tmac
.  am URL
.    ad l
.  .
.  am MTO
.    ad l
.  .
.  LINKSTYLE blue R < >
.\}
.SH "NAME"
nirt_formatting \- DRAFT!!! Document supported output formatting specifications for Natalie\(aqs Interactive RayTracer (NIRT)
.SH "OVERVIEW"
.sp
One of the most powerful features of Natalie\(cqs Interactive RayTracer
(NIRT) is the ability to support user\-defined output formatting for
its outputs.  The \fBfmt\fP command allows on\-the\-fly alteration of
what and how various values generated by shotline intersections, using
a subset of the
\c
.URL "http://www.cplusplus.com/reference/cstdio/printf/" "C/C&#43;&#43; printf
format specifier syntax"  for flexibile template specification and a
series of pre\-defined keys to specify individual elements of generated
results. The general form of a \fBfmt\fP command is:
.sp
\fBfmt\fP \(aqchar\(aq "format string" [keys]...
.sp
where the "char" argument is replaced by a single character
identifying the category of output the format string applies.  The
"format string" is the printf style formatting string, and the keys
will line up with format specifiers in the string the same way
variables in C/C&#43;&#43; line up with specifiers in a printf format
string.
.SH "OUTPUT CATEGORIES"
.sp
NIRT offers seven categories of output reporting:
.TS
allbox tab(:);
lt lt lt.
T{
.sp
\fBCategory Name\fP
T}:T{
.sp
\fBChar\fP
T}:T{
.sp
\fBDescription\fP
T}
T{
.sp
\fBRay\fP
T}:T{
.sp
\fBr\fP
T}:T{
.sp
Report of ray information.  The formatting associated with r will
print once per ray, regardless of whether a region is encountered.
T}
T{
.sp
\fBHeader\fP
T}:T{
.sp
\fBh\fP
T}:T{
.sp
First output after a ray hits anything, typically used to identify
columns in subsequent output.  Printed once per ray.
T}
T{
.sp
\fBPartition\fP
T}:T{
.sp
\fBp\fP
T}:T{
.sp
Output for each region encountered by the ray. Typically this will be
where most of the information about a model is reported.
T}
T{
.sp
\fBFootnote\fP
T}:T{
.sp
\fBf\fP
T}:T{
.sp
Last output statement after a ray hits anything; a "footnote" line
after the ray has completed its evaluations. Printed once per ray.
T}
T{
.sp
\fBGap\fP
T}:T{
.sp
\fBg\fP
T}:T{
.sp
Output written once for each gap the ray may encounter.
T}
T{
.sp
\fBMiss\fP
T}:T{
.sp
\fBm\fP
T}:T{
.sp
If triggered, prints a message that nothing was hit; maximum once
per ray.
T}
T{
.sp
\fBOverlap\fP
T}:T{
.sp
\fBo\fP
T}:T{
.sp
Output written once for each overlap along the ray.
T}
.TE
.sp
.SH "FORMAT STRINGS"
.sp
NIRT\(cqs format specifications are a subset of those found in printf
implementations.  Specifically, the d, i, and f types are supported,
as well as width and precision specifiers.
.SH "REPORTING KEYS \- CONNECTING DATA TO FORMAT STRINGS"
.sp
Unlike the full C/C&#43;&#43; printf, NIRT accepts only pre\-defined string
keys that identify elements of specific information related to each
cateogry of output. Ray information is consistent over an entire shot
event, and therefore Ray keys may be used in all categories:
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.B Table 1. Ray Variables
.TS
allbox tab(:);
lt lt.
T{
.sp
\fBx_orig\fP
T}:T{
.sp
x coordinate of ray origination point.
T}
T{
.sp
\fBy_orig\fP
T}:T{
.sp
y coordinate of ray origination point.
T}
T{
.sp
\fBz_orig\fP
T}:T{
.sp
z coordinate of ray origination point.
T}
T{
.sp
\fBd_orig\fP
T}:T{
.sp
d coordinate of ray origination point.
T}
T{
.sp
\fBh\fP
T}:T{
.sp
h coordinate for the entire ray.
T}
T{
.sp
\fBv\fP
T}:T{
.sp
v coordinate for the entire ray.
T}
T{
.sp
\fBx_dir\fP
T}:T{
.sp
x component of direction vector.
T}
T{
.sp
\fBy_dir\fP
T}:T{
.sp
y component of direction vector.
T}
T{
.sp
\fBz_dir\fP
T}:T{
.sp
z component of direction vector.
T}
T{
.sp
\fBa\fP
T}:T{
.sp
azimuth of view (i.e., of ray direction).
T}
T{
.sp
\fBe\fP
T}:T{
.sp
elevation of view (i.e., of ray direction).
T}
.TE
.sp
.sp
Footnote and Miss categories have no particular keys unique to them,
although they (like all categories) can use the Ray keys if desired.
Partition, Overlap, and Gap, on the other hand, have keys that are
unique to their contexts and valid only within those contexts:
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.B Table 2. Partition Variables
.TS
allbox tab(:);
lt lt.
T{
.sp
\fBattributes\fP
T}:T{
.sp
A string variable consisting of the names and values of the
attributes requested by the \fBattr\fP interactive command or the \-A
command line option.
T}
T{
.sp
\fBx_in\fP
T}:T{
.sp
x coordinate of entry into current region.
T}
T{
.sp
\fBy_in\fP
T}:T{
.sp
y coordinate of entry into current region.
T}
T{
.sp
\fBz_in\fP
T}:T{
.sp
z coordinate of entry into current region.
T}
T{
.sp
\fBd_in\fP
T}:T{
.sp
d coordinate of entry into current region.
T}
T{
.sp
\fBx_out\fP
T}:T{
.sp
x coordinate of exit from current region.
T}
T{
.sp
\fBy_out\fP
T}:T{
.sp
y coordinate of exit from current region.
T}
T{
.sp
\fBz_out\fP
T}:T{
.sp
z coordinate of exit from current region.
T}
T{
.sp
\fBd_out\fP
T}:T{
.sp
d coordinate of exit from current region.
T}
T{
.sp
\fBlos\fP
T}:T{
.sp
line\-of\-sight distance through current region.
T}
T{
.sp
\fBscaled_los\fP
T}:T{
.sp
scaled  line  of  sight:   product   of   line\-of\-sight distance  through  current  region  and region solidity (sometimes called ``percent LOS\(aq\(aq). Note that "region solidity" refers to a thickness equivalence factor often used to simulate material properties like density.
T}
T{
.sp
\fBpath_name\fP
T}:T{
.sp
full path name of current region.
T}
T{
.sp
\fBreg_name\fP
T}:T{
.sp
name of current region
T}
T{
.sp
\fBreg_id\fP
T}:T{
.sp
region ID of current region.
T}
T{
.sp
\fBclaimant_count\fP
T}:T{
.sp
number of regions claiming  this  partition  (that  is, participating in a retained overlap).
T}
T{
.sp
\fBclaimant_list\fP
T}:T{
.sp
space\-separated list of names of regions claiming  this partition   (that   is,  participating  in  a  retained overlap).
T}
T{
.sp
\fBclaimant_listn\fP
T}:T{
.sp
Same as claimant_list,  except  that  it  is  newline, rather than space\-separated.
T}
T{
.sp
\fBobliq_in\fP
T}:T{
.sp
entry obliquity for current region.
T}
T{
.sp
\fBobliq_out\fP
T}:T{
.sp
exit obliquity for current region.
T}
T{
.sp
\fBnm_x_in\fP
T}:T{
.sp
x component of entry normal vector
T}
T{
.sp
\fBnm_y_in\fP
T}:T{
.sp
y component of entry normal vector
T}
T{
.sp
\fBnm_z_in\fP
T}:T{
.sp
z component of entry normal vector
T}
T{
.sp
\fBnm_h_in\fP
T}:T{
.sp
h component of entry normal vector
T}
T{
.sp
\fBnm_v_in\fP
T}:T{
.sp
v component of entry normal vector
T}
T{
.sp
\fBnm_d_in\fP
T}:T{
.sp
d component of entry normal vector
T}
T{
.sp
\fBnm_x_out\fP
T}:T{
.sp
x component of exit normal vector
T}
T{
.sp
\fBnm_y_out\fP
T}:T{
.sp
y component of exit normal vector
T}
T{
.sp
\fBnm_z_out\fP
T}:T{
.sp
z component of exit normal vector
T}
T{
.sp
\fBnm_h_out\fP
T}:T{
.sp
h component of exit normal vector
T}
T{
.sp
\fBnm_v_out\fP
T}:T{
.sp
v component of exit normal vector
T}
T{
.sp
\fBnm_d_out\fP
T}:T{
.sp
d component of exit normal vector
T}
T{
.sp
\fBsurf_num_in\fP
T}:T{
.sp
entry\-surface ID of entry solid.
T}
T{
.sp
\fBsurf_num_out\fP
T}:T{
.sp
exit\-surface ID of exit solid.
T}
.TE
.sp
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.B Table 3. Overlap Variables
.TS
allbox tab(:);
lt lt.
T{
.sp
\fBov_reg1_name\fP
T}:T{
.sp
name of one of the overlapping regions.
T}
T{
.sp
\fBov_reg2_name\fP
T}:T{
.sp
name of the other overlapping region.
T}
T{
.sp
\fBov_reg1_id\fP
T}:T{
.sp
region ID of one of the overlapping regions.
T}
T{
.sp
\fBov_reg2_id\fP
T}:T{
.sp
region ID of the other overlapping region.
T}
T{
.sp
\fBov_sol_in\fP
T}:T{
.sp
name of one of the overlapping solids.
T}
T{
.sp
\fBov_sol_out\fP
T}:T{
.sp
name of the other overlapping solid.
T}
T{
.sp
\fBov_los\fP
T}:T{
.sp
line\-of\-sight distance through the overlap.
T}
T{
.sp
\fBov_x_in\fP
T}:T{
.sp
x coordinate of entry into overlap.
T}
T{
.sp
\fBov_y_in\fP
T}:T{
.sp
y coordinate of entry into overlap.
T}
T{
.sp
\fBov_z_in\fP
T}:T{
.sp
z coordinate of entry into overlap.
T}
T{
.sp
\fBov_d_in\fP
T}:T{
.sp
d coordinate of entry into overlap.
T}
T{
.sp
\fBov_x_out\fP
T}:T{
.sp
x coordinate of exit from overlap.
T}
T{
.sp
\fBov_y_out\fP
T}:T{
.sp
y coordinate of exit from overlap.
T}
T{
.sp
\fBov_z_out\fP
T}:T{
.sp
z coordinate of exit from overlap.
T}
T{
.sp
\fBov_d_out\fP
T}:T{
.sp
d coordinate of exit from overlap.
T}
.TE
.sp
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.B Table 4. Gap Variables
.TS
allbox tab(:);
lt lt.
T{
.sp
\fBx_gap_in\fP
T}:T{
.sp
x coordinate of entry into gap.
T}
T{
.sp
\fBy_gap_in\fP
T}:T{
.sp
y coordinate of entry into gap.
T}
T{
.sp
\fBz_gap_in\fP
T}:T{
.sp
z coordinate of entry into gap.
T}
T{
.sp
\fBgap_los\fP
T}:T{
.sp
line\-of\-sight distance through gap.
T}
.TE
.sp
.SH "COPYRIGHT"
.sp
This software is Copyright (c) 1989\-2021 by the United States
Government as represented by U.S. Army Research Laboratory.
.SH "BUG REPORTS"
.sp
Reports of bugs or problems should be submitted via electronic mail to
.MTO "devs\(atbrlcad.org" "" ""
.SH "AUTHOR"
.sp
BRL-CAD Team