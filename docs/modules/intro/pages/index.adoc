= Introduction to BRL-CAD
:toc:
:sectnums:
:experimental:

This document aims at introducing you to BRL-CAD through a basic
step-by-step tutorial. In this tutorial, you will model a chess set in
BRL-CAD and by the end, we hope this tutorial changes the way you look
at shapes. Brace yourself, you are about to enter the amazing world of
3D computer-aided design (CAD) modeling.


== What is modeling

A model of an object can be used to understand how it works, to
visualize, analyze, print or simply used to study the object. Now, CAD
modeling is the act of creating this computer representation with
specific dimensions. BRL-CAD is used to model 3D objects that have all
the physical characteristics of an object.


== Intro to BRL-CAD

BRL-CAD is a powerful 3D solid modeling system. This software has been
in use for a wide range of military, educational, and industrial
applications. CAD software like BRL-CAD requires a lot of practice to
master, but this tutorial will help you get started. As you work
through the tutorial, you will see commands taking shape into
something you want to model.

To get to know more about BRL-CAD, its origin, history, you can check
out the http://brlcad.org/wiki/FAQ[BRL-CAD FAQs].

Let’s begin this journey and get BRL-CAD installed in your system.
Downloading BRL-CAD is just a few clicks:

* Go to https://brlcad.org/ and click on the *Download* link at the
top left corner.
* On the next page, click on the folder for your computer. For Windows
or Mac operating systems, select *BRL-CAD for Windows* or *BRL-CAD for
Mac OS X* respectively.
* Download and run the installer. Follow the installation prompts.

For a more detailed installation walkthrough, see this
http://brlcad.org/wiki/Tutorial/Newbie[tutorial for newbies].


== Intro to MGED

BRL-CAD has many applications, but in this tutorial you will work in
an editor called “MGED”. The Multi-Device Geometry Editor (MGED) is
the main way to create geometry in BRL-CAD.

Launching MGED on Windows or Mac OS X :: Double-click the application
icon for MGED.

Launching MGED on Linux :: Open a terminal (tty) prompt, using
kbd:[Ctrl+Alt+T] (if you are on Ubuntu). Type [cmd]`mged` in the terminal
prompt and then press kbd:[ENTER].
+
NOTE: There is a chance that you might get an error when you type
[cmd]`mged` in the command prompt stating #mged is not recognized as a
command# or #mged command not found#. In that case, you need to
specify the full path to where you installed BRL-CAD.

Two new windows should pop up: the _MGED Command Window_ and the _MGED
Graphics Window_ (sometimes called the _Geometry Window_). The former
is for entering commands and the later for displaying the output.

[cols="2*^.^~a",frame="none"]
|===
|
.MGED Command Window
image::00-mged-command-window.jpg[]
|
.MGED Graphics Window
image::01-mged-graphics-window.jpg[]
|===

Both windows are empty at the moment.

While there are ways to do nearly everything in MGED via the graphical
user interface menus, this tutorial is going to introduce you to
modeling by way of MGED commands.

== Opening a database:

Before you start modeling anything in MGED, create a database.  Move
your mouse over or click anywhere on the _Command Window_ to make it
active and type [cmd]`opendb` followed by the name of the database
with the [path]`.g` extension:

[subs="+quotes,+macros"]
....
[cmd]#opendb# [path]#demo.g# kbd:[ENTER]
....

If the database with name [path]`demo.g` doesn’t already exist or you
are creating a new one, the _Command Window_ confirms if you want to
create a new database as shown below:

image::02-opendb.jpg[]

Type kbd:[y] and press kbd:[ENTER].

If [path]`demo.g` already exists, the database opens up.


== Modeling in BRL-CAD

Let’s understand in brief how modeling in BRL-CAD works:

* {blank}
+
Using primitive shapes :: Now, what are primitive shapes? A primitive
shape is a basic 3D object whose parameters can be changed without
changing the shape’s type. For example, a sphere is a basic 3D shape
and is one of over two dozen primitives available in BRL-CAD. Click
https://brl-cad.github.io/gallery/media/large/diagrams/primitives.png[here^]
to see the primitives used in BRL-CAD.

* {blank}
+
Employing basic Boolean operations on the shapes :: Not every shape we
model is a primitive shape; so, to get the required output we apply
basic boolean operations of _union_, _subtraction_, and _intersection_
on these shapes. For example, a hollow cylinder can be made by
subtracting a cylinder from another larger cylinder.

Once you are comfortable with a few of the commands, it will get
easier to model anything to everything.


== The modeling target:

In this tutorial, you are going to model a complete chess set. We’re
going to base our 3D modeling on a 2D design by Arthur Shlain.

Seeing your chess pieces and chess board taking shape with each
command is going to be thrilling. First, you will model all the unique
chess pieces which include a pawn, rook, king, queen, knight, and
bishop:

[cols="^", frame="none"]
|===
|
image:03-pawn.jpg[width=15%]
image:04-rook.jpg[width=15%]
image:05-king.jpg[width=15%]
image:06-queen.jpg[width=15%]
image:07-knight.jpg[width=15%]
image:08-bishop.jpg[width=15%]
|===

Click
https://thenounproject.com/ArtZ91/collection/chess/?i=629003[here^] to
see other chess piece designs by Arthur Shlain.

After modeling the chess pieces, you will move on to the chessboard
which will look like this:

image::09-chessboard.jpg[]


== Modeling Pawn

image::10-pawn.jpg[]

Let’s begin by creating a new database for your pawn and name it
[path]`pawn.g`. As discussed earlier, to create a new database type the
following command in the _Command Window_:

`[in]#opendb pawn.g#` kbd:[ENTER]

=== Creating a cylinder for the base

Begin by making the _Command Window_ active (usually by clicking
anywhere in the window). To make the right circular cylinder, type the
following command in the MGED prompt:

`[in]#in base.rcc rcc#` kbd:[ENTER]

Here, `in` is the command which is used to _**IN**sert a primitive
shape_, `base.rcc` is the name of the shape and `rcc` means it is a
_**R**ight **C**ircular **C**ylinder_.

MGED asks you to enter [rep]*x*, [rep]*y* and [rep]*z* values of the
vertex (where you want to place the center of the bottom of the
shape). Type:

`[in]#0 0 0#` kbd:[ENTER]

Make sure to add spaces between the values.

Next, MGED will ask you to enter the [rep]*x*, [rep]*y* and [rep]*z*
values of the height (H) vector (the height of your cylinder). Type:

`[in]#0 0 0.6#` kbd:[ENTER]

Then, the last value MGED will ask you to enter is the radius. Type:

`[in]#2.25#` kbd:[ENTER]

Your MGED _Command Window_ will look something like:

[subs="+quotes"]
....
[prompt]#mged># [in]#in base.rcc rc#
[prompt]#Enter X, Y, Z of vertex:# [in]#0 0 0#
[prompt]#Enter X, Y, Z of height (H) vector:# [in]#0 0 0.6#
[prompt]#Enter radius:# [in]#2.25#
Base.rcc
....

You will get something like this on your _Graphics Window_:

image::11-base.jpg[]

Rather than following this lengthy method, there is another short way
to use the [cmd]`in` command. It allows entering all the parameters in
one go. The above command can also be written as:

`[in]#in base.rcc rcc 0 0 0 0 0 0.6 2.25#` kbd:[ENTER]

Meaning of the above command is:

* `in` -- Insert a primitive shape
* `base.rcc` -- Name it base.rcc
* `rcc` -- Shape should be a right circular cylinder
* `0` -- x value of the vertex is 0
* `0` -- y value of the vertex is 0
* `0` -- z value of the vertex is 0
* `0` -- x value of the height vector is 0
* `0` -- y value of the height vector is 0
* `0.6` -- z value of the height vector is 0.6
* `2.25` -- radius is 2.25

This is how you will be making the rest of the shapes.

Moving on to the upper portion of the pawn.

=== Making the curve

This portion is a little tricky. To make the curve, you will first
make a _Truncated Right Cone_ (trc) and then subtract a _Torus_ (tor)
from the outer portion of trc.

[cols="2*.>~a"]
|===
|
.trc
image::12-trc.jpg[]
|
.tor
image::13-tor.jpg[]
|===

To make the trc, type:

`[in]#in body.trc trc#` kbd:[ENTER]

The *trc* should start from the top of the *rcc* i.e., at the height
of `0.6`.  MGED will ask for the [rep]*x*, [rep]*y*, [rep]*z* values
of the vertex (center of the bottom part). Type:

`[in]#0 0 0.6#` kbd:[ENTER]

Then MGED will ask us to enter [rep]*x*, [rep]*y*, [rep]*z* values of
height vector. Type:

`[in]#0 0 1.7#` kbd:[ENTER]

The next entry we have to make is the radius of the base which must
be the same as the radius of the `base.rcc`. Therefore, type:

`[in]#2.25#` kbd:[ENTER]

The last value MGED asks for is the top radius. Type:

`[in]#0.5#` kbd:[ENTER]

The graphics window will look like:

image::14-base-and-body.jpg[]

To make the curve use the short-hand method of using the [cmd]`in`
command. Type in the _Command Window_:

`[in]#in curve.tor tor 0 0 2.8 0 0 1 2.85 2.35#` kbd:[ENTER]

Here,

* [in]`0 0 2.8` are the [rep]*x*, [rep]*y*, [rep]*z* values of the
  vertex, where:
+
[subs="+quotes"]
....
*2.8* = *0.6* (_z_ value of vertex of _body.trc_)
    + *1.7* (_height_ of _body.trc_)
    + *0.5* (_radius_ of the top of _body.trc_)
....
* [in]`0 0 1` are the [rep]*x*, [rep]*y*, [rep]*z* values of the
  normal vector to make the tube perpendicular to the **z**-axis.
* [in]`2.85` is radius1 (radius from Vertex to the center of the
  tube).
* [in]`2.35` is radius2 (radius of the tube).

The following image visually explains radius1 and radius2.

image::15-tor-radius1-radius2.jpg[]


=== Making a cylinder for the neck

The cylinder should have vertex `0 0 2.3` where `2.3` came after
adding vertex and height of `body.trc` such that the neck is placed
right on top of the body. The height vector of the cylinder should be
`0 0 0.5` and the radius should be `1.4`. Therefore, type:

`[in]#in neck.rcc rcc 0 0 2.3 0 0 0.5 1.4#` kbd:[ENTER]


=== Making a sphere for the head

Make a sphere with vertex `0 0 3.6` and radius `1.1`. Technically the
vertex of the sphere should be

[subs="+quotes"]
....
*3.6* = *2.3*  (the vertex of _neck.rcc_)
    + *0.25* (half of the height of _neck.rcc_)
    + *1.1*  (radius of this sphere)
....

But we want to cut some portion of the head from below. Type:

`[in]#in head.sph sph 0 0 3.6 1.1#` kbd:[ENTER]

To zoom out of the view click the left mouse button and to zoom back
in click the right mouse button. This is what your pawn looks like
till now:

image::16-pawn-azel-view.jpg[]

Go to *View* from menu bar and click on *Front*. This is what your
pawn looks in the front view:

image::17-pawn-front-view.jpg[]


=== Making a region

Before you can raytrace your design, you have to make of region of
all the shapes. Making a region basically means that the shape has
uniform material properties i.e., it has mass and occupies space.
Constructing a region involves using Boolean operations of union,
subtraction, and intersection. To make the region, type:

`[in]#r pawn.r u base.rcc u body.trc - curve.tor u neck.rcc u head.sph#` kbd:[ENTER]

This command tells MGED that

* `*#r#*` -- Make a region
* `*#pawn.r#*` -- Name it pawn.r
* `*#u#*` -- Add the volume of the shape
* `*#-#*` -- Subtract the volume of the shape

Here, we are adding the volume of all the shapes except `curve.tor`,
which we are subtracting from `body.trc` to achieve the required look.

=== Assigning Material Properties to the Region

Now type the following in the MGED command window:

`[in]#mater pawn.r#`

MGED will respond with:

....
Current shader string =
Specify shader. Enclose spaces within quotes.
Shader?
....

MGED asks us to enter the type of material we want our region to be
made of. To make the region of plastic. Type in:

`[in]#plastic#` kbd:[ENTER]

Next, MGED will ask for the color. To make our pawn black in color,
type:

`[in]#0 0 0#` kbd:[ENTER]

At last MGED will ask us if we want to inherit the material properties.
To answer with NO, type:

`[in]#0#` kbd:[ENTER]


=== Clearing the _Graphic Window_ and drawing the new region

We have shapes visible on our graphics window but it is not our
region. To clear the graphics Window of the old design and draw the
new region, type:

`[in]#B pawn.r#` kbd:[ENTER]

image::18-clear-and-draw-region.jpg[]

You will see your pawn and the curve.tor is dotted which indicates
that it subtracted from the region. This command tells MGED to _Blast_
i.e., clear the graphics window and draw the specified region which in
our case is `pawn.r`. The _Blast_ command is a combination of
[cmd]`Z` and [cmd]`draw` commands. On a side note, [cmd]`draw` command
is used to draw an existing shape. For example, to draw the sphere you
made for the head, type : `[in]#draw head.sph#` which tells MGED to
draw `head.sph`. If the specified shape does not exist, MGED will give
an error.


=== Raytracing your model

Go to the *File* menu and select *Raytrace*. A dialog box called the
_Raytrace Control Panel_ appears. Next, change the background color by
the raytraced by selecting [label]#Background Color#. A dropdown will
appear with some predefined color choices and a color tool. Select the
white option. To eliminate the wireframing i.e., the outlines of the
shapes, go to *Framebuffer* (in the _Raytrace Control Panel_) and
select *Overlay*. The display should appear similar to the following
illustration:

image::19-pawn-raytraced.jpg[]

Your pawn is ready to serve the King. Now it’s time to model the rest
of the pieces.


== Modeling Rook

image::20-rook.jpg[]

Before you start modeling this piece, create a new database named
[path]`rook.g`. Create this new database as we did in the previous
case.

Type in the _Command Window_:

`[in]#opendb rook.g#` kbd:[ENTER]

If you didn’t open the MGED _Command Window_ again and used the above
command in the already opened window, you will see that the raytraced
image didn’t disappear. So, in order to get the blue screen back for
making other shapes, go to *Modes* from the menu bar and uncheck the
*Framebuffer Active* option by clicking on it.

Now, you are ready to model the rook. Since you are already familiar
with the [cmd]`in` command, therefore you will be using the shorthand
method of this command for making shapes.


=== Making the base and body

Making the base is the same as we did in pawn. Type the following in
the MGED command window:

`[in]#in base.rcc rcc 0 0 0 0 0 0.8 2.25#` kbd:[ENTER]

This command will make a cylinder at vertex `0 0 0` with height `0 0
0.8` and radius `2.25`.

As we did in pawn, we will create the body using two shapes: *rcc* and
*trc*. To create the body, type:

`[in]#in body.trc trc 0 0 0.8 0 0 3 2.25 1.1#` kbd:[ENTER]

This command creates a trc at vertex `0 0 0.8` with height `0 0 1.5`,
radius of the base `2.25` and radius of top `1.1`. Now, to create the
curve, type:

`[in]#in curve.tor tor 0 0 3 0 0 1 3.6 2.6#` kbd:[ENTER]

In pawn, we had the vertex at a distance greater than the height of
*trc* because we wanted the curve to start right when the body starts
but in this case we want to have a straight portion before the curve
part. So, we have the vertex at `0 0 3`. The normal vector is `0 0 1`
to make our shape perpendicular to **z**-axis. Radius 1 is `3.6` and
Radius 2 is `2.6`.

You will get something like this (after zooming out by clicking the
left mouse button, to zoom in click the right mouse button):

image::21-rook-azel-view.jpg[]

In *Front* view:

image::22-rook-front-view.jpg[]

=== Constructing the hollow cylinder for the head

Now comes the tricky part; we need to model the head. To understand it
completely, type [cmd]`Z` to clear the _Graphic Window_ temporarily.
Make sure your _Command Window_ is active while you do so.

****
One of the common mistakes we make as a beginner is that we forget to
make the _Command Window_ active and end up typing on the _Graphics
Window_. For those who have typed kbd:[Z] but the design started
rotating, you need not worry. Go to the *View* option on the Menu bar
and click on the last option *Zero* . Now to get back your design in
the original orientation, go to *View* option once again and click on
the view you were previously in. By default, the view is
*az35,el25* . Click on this option and you are ready to move further.
****

To make a cylinder for neck:

`[in]#in neck.rcc rcc 0 0 3.8 0 0 1 1.75#` kbd:[ENTER]

The value of vertex `0 0 3.8` came after adding the height of the
base and the body. I hope you are familiar with how we use the value
of the vertex.

For the head, we have to make a hollow cylinder first, which comes
after subtracting a cylinder from another cylinder with a
comparatively larger radius. Therefore, the vertex and height of both
the inner and outer cylinders should be the same. The radius of the
inner cylinder depends on the thickness of the required hollow
cylinder.

To construct the outer cylinder type:

`[in]#in outer.rcc rcc 0 0 4.8 0 0 0.6 1.75#` kbd:[ENTER]

To make the inner cylinder with the same vertex and height, type:

`[in]#in inner.rcc rcc 0 0 4.8 0 0 0.6 1.25#` kbd:[ENTER]

Your graphics window will look like:

image::23-rook-neck.jpg[]

=== The first cuboid for the rook head

Generally, when you see a rook piece its head seems as in a hollow
cylinder is cut in pieces. To replicate that, we will make two cuboids
with length equal to or greater than the radius of the outer cylinder,
and height equal to the height of either one of the cylinders (both
inner and outer cylinders have the same height). Then you will
subtract these cuboids from the hollow cylinder. Now you will make two
cuboids that can be placed perpendicular to each other like an X mark
(a cross). For that, we will make *rpp* (Rectangular Parallelopiped).

To make the first one, type:

`[in]#in cross1.rpp rpp#` kbd:[ENTER]

Then MGED will ask for `XMIN`, `XMAX`, `YMIN`, `YMAX`, `ZMIN`, `ZMAX`
values. Type:

`[in]#-1.75 1.75 -0.5 0.5 4.8 5.4#` kbd:[ENTER]

To check the coordinate system, press kbd:[m] making sure the Graphics
window is active. You won’t see the coordinate lines because you are a
little above the origin. So, left-click on the graphics window to
zoom out. You will see that the **Z**-axis is along the diameter.
Therefore the `XMIN` should be `-1.75` (radius of the outer cylinder)
and `XMAX` should be `1.75`. The breadth is along the
**Y**-axis. Therefore, `-0.5` for `YMIN` and `0.5` for `YMAX`. The
height is along the **Z**-axis. Since the cuboid must start from the
base of the outer cylinder, therefore `ZMIN` is `4.8` and `ZMAX` is
`5.4` i.e., `ZMIN` plus height of outer cylinder (`0.6`).

image::24-rook-neck-cuboid.jpg[]

=== Constructing a cuboid perpendicular to the first

Since you need another cuboid perpendicular to the first one, we use
the clone command as follows:

`[in]#clone -r 0 0 90 cross1.rpp#` kbd:[ENTER]

You are not yet familiar with the clone command which will be
explained in detail in the _Modeling Chessboard_ section.

Now, MGED will respond with

....
cross101.rpp {cross101.rpp)
....

This means we have both shapes for the cross. To view the other shape,
type:

`[in]#draw cross101.rpp#` kbd:[ENTER]

You can look at the head from different views by changing it from the
*View* Menu. Don’t get discouraged if you only see the head, the other
shapes are still right there but since we cleared the Graphics Window
using [cmd]`Z` they are not visible. To get the list of all the shapes
in your database, type in the command window:

`[in]#ls#` kbd:[ENTER]

You will get a list of all your shapes. To view all your shapes on the
Graphics Window, use the draw command. Draw all the remaining shapes
as follows:

`[in]#draw base.rcc body.trc curve.tor#` kbd:[ENTER]

Make sure to add spaces between the names. This command tells MGED to
draw the three specified shapes. In the *az35, el25* view, your design
will look like:

image::25-rook-azel-view.jpg[]

Before you raytrace, make the region of the rook:

`[in]#r rook.r u base.rcc u body.trc - curve.tor u neck.rcc u
outer.rcc - inner.rcc - cross1.rpp - cross101.rpp#` kbd:[ENTER]

Here we have subtracted `curve.tor` from `body.trc` to make the
curve. Subtracted `inner.rcc` from `outer.rcc` to make a hollow
cylinder and subtracted both cuboids `cross1.rpp` and `cross101.rpp`
from the outer hollow cylinder to give the finishing look. This
command makes a region named `rook.r`.


=== Assigning material properties and raytracing

We will assign material properties as we did in the case of pawn. We
will use the shorthand method of the mater command. Type:

`[in]#mater rook.r plastic 0 0 0 0#` kbd:[ENTER]

Don’t forget to clear the graphics window and redraw the design using
Blast command as follows:

`[in]#B rook.r#` kbd:[ENTER]

Now, raytrace your design from the *File* menu. Change the background
color to white and select the *Overlay* option from *Framebuffer*
option in the Raytrace Menu Bar. For details check the instructions in
the previous model of the pawn. This is what we get after raytracing:

[cols="2*a",frame="none"]
|===
|
.az35, el25 view
image::26-rook-rt-azel-view.jpg[]
|
.Left view
image::27-rook-rt-left-view.jpg[]
|===

== King

image::28-king.jpg[]

Now it’s time to model the king. It is comparatively easier than the
above pieces. To begin modeling, create a new database, type in the
command prompt:

`[in]#opendb king.r#` kbd:[ENTER]

You have your Command and Graphics ready after confirming in the
dialog box.

If you look at all the chess pieces, you see that the base and body of
almost all the pieces are the same and they only differ in the head
area. To make the base and the body, type in:

`[in]#in base.rcc rcc 0 0 0 0 0 0.7 2.25#` kbd:[ENTER]


`[in]#in body.trc trc 0 0 0.7 0 0 2.2 2.25 0.85#` kbd:[ENTER]


`[in]#in curve.tor tor 0 0 2.9 0 0 1 3.2 2.4#` kbd:[ENTER]


To make a cylinder for the neck, type:

`[in]#in neck.rcc rcc 0 0 2.9 0 0 0.5 1.4#` kbd:[ENTER]

As described in the above pieces, the shape `neck.rcc` must be placed
at the top of `body.trc`. Once we have made the base, body, and curve
we get something like this:

image::29-king-base-body-curve.jpg[]

When we look closely at the end product, the head can be divided into
three parts, the head bottom, the middle section, and the tiny top
section. All of these are *trc*. To make the bottom part of the head,
type:

`[in]#in headbottom.trc trc 0 0 3.4 0 0 1.5 0.8 1.4#` kbd:[ENTER]

Here the base radius of the `headbottom.trc` is equal to the top
radius of `body.trc`.

Since the top radius of `headbottom.trc` should be equal to the base
radius of the `headmid.trc`. Therefore, to make the mid part, type:

`[in]#in headmid.trc trc 0 0 4.9 0 0 0.3 1.4 1.1#` kbd:[ENTER]

Now to make the top part this head, type:

`[in]#in headtop.trc trc 0 0 5.2 0 0 0.6 0.3 0.5#` kbd:[ENTER]

After this, your Graphics Window looks like:

image::30-king-all-parts.jpg[]

You have all your shapes now. It is time to make a region of it:

`[in]#r king.r u base.rcc u body.trc - curve.tor u neck.rcc u
headbottom.trc u headmid.trc u headtop.trc#` kbd:[ENTER]

Now, assign material properties using the following command:

`[in]#mater king.r plastic 0 0 0 0#` kbd:[ENTER]

Before raytracing, use the blast command as follow:

`[in]#B king.r#` kbd:[ENTER]

To achieve the target design, change the view to *Front* from the
*View* menu. Now raytrace your design from the *File* menu.

image::31-king-rt-front-view.jpg[]


== Queen:

image::32-queen.jpg[]

As always, begin by creating a new database using the following
command in the command prompt:

`[in]#opendb queen.r#` kbd:[ENTER]

The King piece and the queen differ only in the top part. So, we will
reuse the commands we used in the upper section. Type in the Command
Window:

`[in]#in base.rcc rcc 0 0 0 0 0 0.7 2.25#` kbd:[ENTER]

`[in]#in body.trc trc 0 0 0.7 0 0 2.2 2.25 0.85#` kbd:[ENTER]

`[in]#in curve.tor tor 0 0 2.9 0 0 1 3.2 2.4#` kbd:[ENTER]

`[in]#in neck.rcc rcc 0 0 2.9 0 0 0.5 1.4#` kbd:[ENTER]

If you look closely, the only difference is the height of the
`headmid.trc` and the top section of the queen is a sphere. So, type:

`[in]#in headbottom.trc trc 0 0 3.4 0 0 1.5 0.8 1.4#` kbd:[ENTER]

`[in]#in headmid.trc trc 0 0 4.9 0 0 0.6 1.4 0.6#` kbd:[ENTER]

`[in]#in headtop.sph sph 0 0 5.6 0.4#` kbd:[ENTER]

The portion of the sphere at the top is slightly larger in size than a
semi-sphere. So, the vertex of the sphere is `0 0 0.5` i.e., vertex of
`headmid.trc` + height of `headmid.trc` + `0.1` . The value 0.1 is
added to make it slightly larger than a semi-sphere.

The output is:

image::33-queen-azel-view.jpg[]

Make a region using the following command:

`[in]#r queen.r u base.rcc u body.trc - curve.tor u neck.rcc u
headbottom.trc u headmid.trc u headtop.sph#` kbd:[ENTER]

The front view looks like:

image::34-queen-front-view.jpg[]

Now, comes the part of assigning the material properties and finally
Raytracing the design. Type:

`[in]#mater queen.r plastic 0 0 0 0#` kbd:[ENTER]

`[in]#B queen.r#` kbd:[ENTER]

After Raytracing, the queen in *Front* view looks like:

image::35-queen-rt-front-view.jpg[]


== Bishop

image::36-bishop.jpg[]

Begin by creating a new database, name it `rook.g`.

Using the same commands for the base:

`[in]#in base.rcc rcc 0 0 0 0 0 0.7 2.25#` kbd:[ENTER]

`[in]#in body.trc trc 0 0 0.7 0 0 2.2 2.25 0.85#` kbd:[ENTER]

`[in]#in curve.tor tor 0 0 2.9 0 0 1 3.2 2.4#` kbd:[ENTER]

`[in]#in neck.rcc rcc 0 0 2.9 0 0 0.5 1.4#` kbd:[ENTER]

Now, coming to the head of the bishop, you will use two shapes for it,
*sph* and *trc*.
The sphere starts from the base of `neck.rcc`, therefore the vertex of
this sphere equals to vertex of `neck.rcc` + radius of the sphere i.e.,
`2.9` + `1.1` = `4`. Type:

`[in]#in head.sph sph 0 0 4.0 1.1#` kbd:[ENTER]


The top has vertex `0 0 4.4`, where `4.4` = z value vertex of
`head.sph` (`4.0`) + (`0.4`)

`[in]#in headtop.trc trc 0 0 4.4 0 0 1.2 1 0.25#` kbd:[ENTER]

Since you have got all the shapes, you have an output like this in the
*Front* view:

image::37-bishop-front-view.jpg[]

Make the region:

`[in]#r bishop.r u base.rcc u body.trc - curve.tor u neck.rcc u
head.sph u headtop.trc#` kbd:[ENTER]

Assign material properties:

`[in]#mater bishop.r plastic 0 0 0 0#` kbd:[ENTER]

Before you Raytrace, don’t forget to blast your region using the
command

`[in]#B bishop.r#` kbd:[ENTER]

Now Raytrace it with a white background. The front view after we
raytracing looks like this:

image::38-bishop-rt-front-view.jpg[]


== Knight

image::39-knight.jpg[]

Last but not least, it is time to model the knight. I hope till now
you are a little confident while working with dimensions because this
section is going to have plenty of measurements.

Begin by creating a new database named `rook.g`.

The Knight piece can be broken down into four sections: base, body,
neck and the top.  Starting with the base which is same as the other
pieces, type in the MGED command window:

`[in]#in base.rcc rcc 0 0 0 0 0 1.1 2.25#` kbd:[ENTER]

Now, coming to the body. The body section is made up of two shapes;
*arb6* and *rpp*. You are already familiar with *rpp* (Rectangular
Parallelepiped), so let’s get you introduced with *arb6 (Arbitrary
Convex Polyhedron, 6pts)* You will use a shape like the one given
below:

image::40-arb6-rpp.jpg[]

While making this shape using the [cmd]`in` command, MGED will ask you
to enter the values of all six points. The following image gives an
idea of the points:

image::41-arb6.jpg[]

You will use this shape to make the left part of the body section. To
insert this shape, type:

`[in]#in body1.arb6 arb6#` kbd:[ENTER]

MGED will then ask you to enter [rep]`x`, [rep]`y`, [rep]`z` values of
all six points, one by one. Let’s understand each point and its value.

For *point 1*, type

`[in]#0.65 0.5 1.1#` kbd:[ENTER]

For *point 2*, type

`[in]#0.65 0.5 2.9#` kbd:[ENTER]

For *point 3*, type

`[in]#0.65 -0.5 2.9#` kbd:[ENTER]

For *point 4*, type

`[in]#0.65 -0.5 1.1#` kbd:[ENTER]

For *point 5*, type

`[in]#1.75 0.5 1.1#` kbd:[ENTER]

For *point 6*, type

`[in]#1.75 -0.5 1.1#` kbd:[ENTER]

Here,

* `1.75` = radius of _base.rcc_ (`2.25`) - the distance of the body
  from the edge of base (`0.5`)
* `0.5` = half of body’s width
* `1.1` = height of _base.rcc_
* `2.9` = height of _base.rcc_ (`1.1`) + height of body (`1.8`)

To make the other part of the body, type:

`[in]#in body2.rpp rpp -1.75 0.65 -0.5 0.5 1.1 2.9#` kbd:[ENTER]

This is what we get as output:

image::42-knight-body.jpg[]

Moving on to the neck, it also consists of two parts. You will make
two *rpp*. As you look at the target design, the left side of the neck
has a slightly greater height than the right side. So, to make two
*rpp* of different heights, type:

`[in]#in neck1.rpp rpp 0 1.75 -0.5 0.5 2.9 3.7#` kbd:[ENTER]

`[in]#in neck2.rpp rpp -1.75 0 -0.5 0.5 2.9 3.4#` kbd:[ENTER]

The top also has two parts, left and right *arb6*. The left one starts
from the top of `neck1.rpp` and the right one starts at the top of
`neck2.rpp`. Also, the right *arb6* has a height slightly greater than
the left one. To get the shapes, type:

[subs="+quotes,+macros"]
....
[in]#in top1.arb6 arb6# kbd:[ENTER]
[in]#0 0.5 3.7# kbd:[ENTER]
[in]#0 0.5 5.2# kbd:[ENTER]
[in]#0 -0.5 5.2# kbd:[ENTER]
[in]#0 -0.5 3.7# kbd:[ENTER]
[in]#1.75 0.5 3.7# kbd:[ENTER]
[in]#1.75 -0.5 3.7# kbd:[ENTER]
[in]#in top2.arb6 arb6# kbd:[ENTER]
[in]#-1.75 0.5 3.4# kbd:[ENTER]
[in]#0 0.5 5.4# kbd:[ENTER]
[in]#0 -0.5 5.4# kbd:[ENTER]
[in]#-1.75 -0.5 3.4# kbd:[ENTER]
[in]#0 0.5 3.4# kbd:[ENTER]
[in]#0 -0.5 3.4# kbd:[ENTER]
....

****
On a side note, these commands can be written in the shorthand method
with all the values in a single row separated by spaces.
****

Our Graphics Window looks like this:

image::43-knight-azel-view.jpg[]

And in Left view:

image::44-knight-left-view.jpg[]

Type the following command to make the region:

`[in]#r knight.r u base.rcc u body1.arb6 u body2.rpp u neck1.rpp u
neck2.rpp u top1.arb6 u top2.arb6#` kbd:[ENTER]

Now, assign the material properties to this knight and redraw your
design. Type:

`[in]#mater knight.r plastic 0 0 0 0#` kbd:[ENTER]

`[in]#B knight.r#` kbd:[ENTER]

After raytracing your design looks like:

image::45-knight-rt-azel-view.jpg[]

In Left view:

image::46-knight-rt-left-view.jpg[]

There is a color difference because the part above is plain and the
bottom area is round.


== Modeling the Chess Set

=== Chessboard

In this lesson, we are going to model the chessboard. Given below is
our target design:

image::09-chessboard.jpg[]

Create a new database name [path]`chess.g`

`[in]#opendb chess.g#` kbd:[ENTER]


=== Assigning a title to your database

In the MGED command window, type [cmd]`title` followed by the title of
your database justifying what you are making. Press kbd:[Enter] at the
end.

`[prompt]#mged># [in]#title Chess#` kbd:[ENTER]

=== Creating a single tile for the chessboard

Before beginning, make sure that MGED Command Window is active
(by clicking anywhere in the window). Then type in the command:

`[in]#in tile.s1 rpp 0 1 0 1 -0.1 0#`

image::47-tile.jpg[]


=== Making a region of the tile

Type in the MGED prompt:

`[in]#r tile.r1 u tile.s1#`

This command makes a region with the name `tile.r1`

=== Understanding the clone command

Let’s understand the clone command first.  This command is used to do
deep copying in MGED. The syntax for this command is:

`[cmd]#clone# +++[+++[opt]#-abhimnprtv#] <object>`

Here each one of the `+++[+++[opt]#-abhimnprtv#]` have a specific
meaning to it. Let’s better understand this command using examples.

Create a demo database by typing `[in]#mged demo.g#` in the command
prompt. Then, create a sphere using the [cmd]`in` command as follows:

`[in]#in tile.s1 rpp 0 1 0 1 -0.1 0#` kbd:[ENTER]

Option `[opt]#-a# <n> <x> <y> <z>` specifies the translation split
dimensions between n clones.  Type,

`[in]#clone -a 2 0 0 3 tile.#` kbd:[ENTER]

MGED will show this:

....
tile.s101 {tile.s101 tile.s201}
....

This means, you have got two clones separated by distance 3
units on the **z**-axis. To visually verify it, type:

`[in]#draw tile.s101 tile.s2#` kbd:[ENTER]

image::48-tile-translation-clones.jpg[]

Option `[opt]#-b# <n> <x> <y> <z>` specifies a rotation around the
*x*, *y* and *z* axes split between *n* copies.

Example: Type `[in]#Z#` on the MGED command prompt to clear the
graphic window.
Then type,

[subs="+quotes"]
....
[prompt]#mged># [in]#draw tile.s1#
[prompt]#mged># [in]#clone -b 2 0 180 0 tile.s1#
tile.s301 {tile.301 tile.401}
....

image::49-tile-rotation-clones.jpg[]

You see that the cloned tiles are separated from each other by an
angle of 180 along the *y* axis.

* [opt]`-c` -- Increment the second number in object names.
* [opt]`-f` -- Don’t draw the new object.
* [opt]`-g` -- Don’t resize the view after drawing new objects.
* [opt]`-h` -- Prints the message.
* `[opt]#-i# <n>` -- Specifies the increment between each copy.
* `[opt]#-m# <axis> <pos>` -- Specifies the axis and point to mirror
  the group.
* `[opt]#-n# <+++#+++ copies>` -- Specifies the copies you make.
* `[opt]#-p# <x> <y> <z>` -- Specifies point to rotate around for
  [opt]`-r`. Default is `0 0 0`.
* `[opt]#-r# <x> <y> <z>` -- Specifies the rotation around *x*, *y*
  and *z* axes. It works same as [opt]`-b` when combined with
  [opt]`-n`.
* `[opt]#-t# <x> <y> <z>` -- Specifies the translation between each
  copy. It works same as [opt]`-a` when combined with `n`.
* [opt]`-v` -- Prints version info.

=== Cloning the tile for three other tiles

Coming back to our chessboard, let’s clone the tile we made earlier.
Now, type:

`[in]#clone -t 2 0 0 -i 1 -n 3 tile.r1#` kbd:[ENTER]

MGED will respond with:

....
tile.r2 {tile.s2 tile.s3 tile.s4 tile.r2 tile.r3 tile.r4}
....

This command translates the first clone `tile.r2` at `x:2 y:0 z:0`
(leaving a gap of 1 unit) and then increments it value by 1 for the
next clone. `[opt]#-n# 3` specifies that it creates three clones
(`tile.r2 tile.r3 tile.r4`)

This command successfully creates single colored tiles of a row. Till
now, you can only see one tile in the graphics window, to see all the
clone, type:

`[in]#draw tile.r2 tile.r3 tile.r4#` kbd:[ENTER]

Left click on the graphic window for all the tiles to fit in the
graphics window.

image::50-tiles-of-a-row.jpg[]


=== Grouping the tiles in a row

Let’s group these tiles in one row:

`[in]#g row.g1 tile.r1 tile.r2 tile.r3 tile.r4#` kbd:[ENTER]


=== Creating an alternate row by cloning

To get the tiles in alternate position as present in the above
screenshot, we will clone this row and translate it to `x:1 y:1 z:0`,
as shown below:

`[in]#clone -t 1 1 0 -i 1 row.g1#` kbd:[ENTER]

MGED will respond with:

....
row.g2 {tile.s5 tile.r5 tile.s6 tile.r6 tile.s7 tile.r7
tile.s8 tile.r8 row.g2}
....

Type `[in]#draw row.g2#` kbd:[ENTER] in the command prompt to view the
`row.g2`:

image::51-two-rows-of-tiles.jpg[]

There are total 8 rows in a chess board, so we will have 3 clones each
of `row.g1` and `row.g2`


=== Making the remaining rows

Now, we will be translating along the *y* axis, therefore the command
will be:

`[in]#clone -t 0 2 0 -i 1 -n 3 row.g1#` kbd:[ENTER]

And for `row.g2`

`[in]#clone -t 0 2 0 -i 1 -n 3 row.g2#` kbd:[ENTER]

You will get `row.g3` , `row.g4` , `row.g5` clones of `row.g1` and
clones `row.g6` , `row.g7` , `row.g8` of `row.g2`.

You can view these rows by using the draw command:

`[in]#draw row.g3 row.g4 row.g5 row.g6 row.g7 row.g8#` kbd:[ENTER]

image::52-all-alternate-tiles.jpg[]

You see that here we only have alternate tiles i.e., tiles of one
color.  Let’s group them together under one name `black.g` as shown
below:

`[in]#g black.g row.g1 row.g2 row.g3 row.g4 row.g5 row.g6 row.g7
row.g8#` kbd:[ENTER]

Now, in order to make the white tiles we will clone the group of black
tiles `black.g` , as shown below:

`[in]#clone -r 0 0 90 -p 4 4 0 black.g#` kbd:[ENTER]


We will get a clone with the name `black.g2`. We can change the name
of this group to `white.g` using the [cmd]`mv` command.

`[in]#mv black.g2 white.g#` kbd:[ENTER]


Now, let’s have a look at the rest of our slides by typing `[in]#draw
white.g#`

image::53-all-tiles.jpg[]

=== Giving colors to our tiles

In this section we will color our tiles using the [cmd]`comb_color` command
which means combination color i.e. color of the whole
combination/group. The syntax to use this command is:

`[cmd]#comb_color# _combination_ _R_ _G_ _B_`

Where `combination` is the name of the combination we want to color.
`R`, `G` and `B` are the red, green and blue values respectively.

To color the black tiles:

`[in]#comb_color black.g 0 0 0#` kbd:[ENTER]

To color the white tiles:

`[in]#comb_color white.g 255 255 255#` kbd:[ENTER]

Now combine these black and white tiles to form a board.

`[in]#g board.g black.g white.g#` kbd:[ENTER]

And then comes the final part, which is to raytrace our chessboard.
Before we raytrace, move the mouse pointer to the Command Prompt and
type at the prompt:

`[in]#B board.g#` kbd:[ENTER]

This command clears the screen and redraws the board with the
specified colors.

=== Raytracing the Board

Go to the *File* menu and select *Raytrace*. The Raytrace Control
Panel opens. To have a lighter background, click on the dropdown
button on the right of *Background Color*.  Click on *Raytrace* to
start the raytracing process.

image::54-raytrace-control-panel.jpg[]

While it is raytracing, click on the Framebuffer options in the
_Raytrace Control Panel Menu Bar_ and click on *Overlay*.

After the raytracing process is completed, you get a board, as shown
below:

image::55-chessboard.jpg[]

